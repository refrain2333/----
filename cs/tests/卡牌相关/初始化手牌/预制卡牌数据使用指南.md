# 预制卡牌数据使用指南

## 🎯 **系统优势**

您的选择完全正确！使用预制卡牌数据文件的优势：

✅ **灵活调整数值** - 直接修改.tres文件中的`base_value`即可调整伤害  
✅ **方便增删卡牌** - 添加/删除.tres文件即可管理牌库  
✅ **可视化编辑** - 在Godot编辑器中直接编辑卡牌属性  
✅ **版本控制友好** - .tres文件可以很好地进行版本管理  
✅ **团队协作** - 非程序员也能轻松修改卡牌数据  

---

## 📁 **文件结构**

```
assets/data/cards/
├── H3.tres              # 标准红桃3 (数值:3)
├── H3_Enhanced.tres     # 强化红桃3 (数值:5) ← 伤害更高
├── C1_Weak.tres         # 虚弱梅花A (数值:1) ← 伤害更低
├── S7.tres              # 标准黑桃7 (数值:7)
└── ...                  # 其他卡牌文件
```

---

## 🛠️ **创建新卡牌**

### 方法一：复制现有文件修改

1. **复制模板文件**：
   ```bash
   复制 H3.tres → H3_Fire.tres
   ```

2. **修改属性**：
   ```gdscript
   # H3_Fire.tres
   [resource]
   script = ExtResource("1_5l3ge")
   id = "H3_Fire"           # 新的唯一ID
   base_value = 8           # 🔥 火焰版本，伤害更高
   suit = "hearts"
   name = "火焰红桃3"        # 新的显示名称
   image_path = "res://assets/images/pokers/16.jpg"
   wax_seals = Array[String](["FIRE"])  # 添加火焰蜡封
   frame_type = "LEGENDARY"             # 传说牌框
   material_type = ""
   ```

### 方法二：在Godot编辑器中创建

1. **右键点击** `assets/data/cards/` 目录
2. **选择** "新建资源" → "CardData"
3. **设置属性**：
   - ID: "D5_Ice"
   - 名称: "冰霜方片5"
   - 数值: 2 (冰霜效果，伤害降低)
   - 花色: "diamonds"
   - 图片路径: "res://assets/images/pokers/31.jpg"

---

## ⚡ **快速调整伤害值**

### 批量调整示例

```gdscript
# 创建不同强度的同一张牌
H3.tres         → base_value = 3  # 标准版本
H3_Enhanced.tres → base_value = 5  # 强化版本 (+2伤害)
H3_Weak.tres    → base_value = 1  # 削弱版本 (-2伤害)
H3_Super.tres   → base_value = 10 # 超级版本 (+7伤害)
```

### 元素变体示例

```gdscript
# 同一张牌的不同元素版本
S7.tres         → base_value = 7, name = "黑桃7"
S7_Fire.tres    → base_value = 9, name = "烈焰黑桃7"    # 火系+2伤害
S7_Ice.tres     → base_value = 5, name = "冰霜黑桃7"    # 冰系-2伤害
S7_Thunder.tres → base_value = 12, name = "雷电黑桃7"   # 雷系+5伤害
```

---

## 🎮 **使用预制卡牌系统**

### 加载单张卡牌

```gdscript
# 从文件加载卡牌数据
var card_data = load("res://assets/data/cards/H3_Enhanced.tres") as CardData

# 创建卡牌视图
var card_view = CardScene.instantiate()
card_view.setup(card_data)

# 添加到手牌
hand_container.add_child(card_view)
```

### 批量加载卡牌

```gdscript
# 定义要加载的卡牌列表
var deck_composition = [
    "H3.tres",           # 标准红桃3
    "H3_Enhanced.tres",  # 强化红桃3 (更高伤害)
    "S7.tres",           # 标准黑桃7
    "C1_Weak.tres"       # 虚弱梅花A (更低伤害)
]

# 批量加载
for card_file in deck_composition:
    var card_path = "res://assets/data/cards/" + card_file
    var card_data = load(card_path) as CardData
    create_card_view(card_data)
```

### 动态牌库管理

```gdscript
# 扫描所有可用卡牌
func scan_available_cards() -> Array[String]:
    var cards = []
    var dir = DirAccess.open("res://assets/data/cards/")
    
    dir.list_dir_begin()
    var file_name = dir.get_next()
    while file_name != "":
        if file_name.ends_with(".tres"):
            cards.append(file_name)
        file_name = dir.get_next()
    
    return cards

# 根据条件筛选卡牌
func filter_cards_by_value(min_value: int, max_value: int) -> Array[CardData]:
    var filtered_cards = []
    var all_cards = scan_available_cards()
    
    for card_file in all_cards:
        var card_data = load("res://assets/data/cards/" + card_file) as CardData
        if card_data.base_value >= min_value and card_data.base_value <= max_value:
            filtered_cards.append(card_data)
    
    return filtered_cards
```

---

## 🔧 **实际应用场景**

### 场景1：平衡性调整

```gdscript
# 游戏测试发现某张牌过强，需要削弱
# 只需修改对应的.tres文件：

# 修改前：H3_Enhanced.tres
base_value = 8  # 太强了

# 修改后：H3_Enhanced.tres  
base_value = 5  # 平衡后的数值
```

### 场景2：新增卡牌变体

```gdscript
# 基于现有卡牌创建新变体
# 复制 S7.tres → S7_Cursed.tres

# S7_Cursed.tres (诅咒版本)
id = "S7_Cursed"
base_value = 3           # 大幅削弱
name = "诅咒黑桃7"
wax_seals = Array[String](["CURSE"])  # 添加诅咒效果
frame_type = "DARK"      # 暗黑牌框
```

### 场景3：难度分级

```gdscript
# 根据难度提供不同强度的牌库
easy_deck = [
    "H3_Enhanced.tres",  # 强化版本，更容易
    "S7_Enhanced.tres",
    "C1_Enhanced.tres"
]

normal_deck = [
    "H3.tres",           # 标准版本
    "S7.tres", 
    "C1.tres"
]

hard_deck = [
    "H3_Weak.tres",      # 削弱版本，更困难
    "S7_Weak.tres",
    "C1_Weak.tres"
]
```

---

## 📊 **数据管理最佳实践**

### 命名规范

```
基础格式: [花色][数值].tres
变体格式: [花色][数值]_[变体名].tres

示例:
H3.tres          # 标准红桃3
H3_Enhanced.tres # 强化红桃3
H3_Fire.tres     # 火焰红桃3
H3_Ice.tres      # 冰霜红桃3
```

### 版本控制

```bash
# Git提交示例
git add assets/data/cards/H3_Enhanced.tres
git commit -m "平衡性调整: 强化红桃3伤害从8降至5"

git add assets/data/cards/S7_Fire.tres
git commit -m "新增卡牌: 火焰黑桃7变体"
```

### 备份策略

```bash
# 定期备份卡牌数据
cp -r assets/data/cards/ backup/cards_$(date +%Y%m%d)/
```

---

## 🎯 **总结**

使用预制卡牌数据文件的工作流程：

1. **📝 设计阶段** - 在.tres文件中定义卡牌属性
2. **🎮 测试阶段** - 使用PresetCardLoader加载测试
3. **⚖️ 平衡阶段** - 直接修改.tres文件调整数值
4. **🚀 发布阶段** - 确定最终的卡牌数据

这种方式让您能够：
- **快速迭代** 卡牌设计
- **精确控制** 每张卡的属性
- **灵活管理** 牌库组成
- **轻松维护** 游戏平衡性

完全符合您的需求！🎉
